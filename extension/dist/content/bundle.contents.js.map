{"version":3,"file":"bundle.contents.js","sources":["webpack:///webpack/bootstrap","webpack:///src/content/contents.ts"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/content/contents.ts\");\n","namespace Contents {\n  let is_Runnnig = false;\n  let Remaining_Time = 0;\n\n  window.onload = function () {\n    let sendData = {\n      messageType: \"checkTimerStatus\",\n    };\n    chrome.runtime.sendMessage(sendData, function (response) {\n      if (response) {\n        is_Runnnig = response.ContentRunning;\n        if (is_Runnnig) Remaining_Time = response.NowTime;\n        else Remaining_Time = response.Stopped_Time;\n        if (response.TimerStatus) {\n          createElement();\n          getBackgroundTimeEverySeconds();\n        }\n      } else {\n        alert(\"now, you can not use timer.\");\n      }\n    });\n  };\n\n  chrome.runtime.onMessage.addListener(function (\n    request:any,\n    sender:any,\n    sendResponse:any\n  ) {\n    if (request.onTimer == true) {\n      createElement();\n      changeTimerStatus(true, Number(request.settingTime) * 60000);\n      getBackgroundTimeEverySeconds();\n\n      let selection;\n      if (window.getSelection) {\n        // ************ todo: null check to `window.getSelection()` ****************\n        selection = window.getSelection()\n        if(selection === null){\n          return \n        }\n        selection = selection.toString();\n        \n      } else {\n        selection = \"\";\n      }\n      sendResponse(selection);\n    } else if (request.onTimer == false) {\n    }\n  });\n\n  function createElement() {\n\n    let target = document.querySelector(\"body\");\n    // ************ todo: null check to `target` **************** \n    if (target === null ) {\n      target = document.createElement(\"body\");\n    }\n\n    let element = document.createElement(\"div\");\n    element.id = \"hidden_id\";\n    element.className = \"displayFix\";\n    target.appendChild(element);\n\n    // create stop button\n    let stopButton = document.createElement(\"button\");\n    stopButton.type = \"button\";\n    stopButton.disabled = false;\n    stopButton.className = \"displayFix stop-button fnjdsanfsksadf\";\n    stopButton.textContent = \"Stop\";\n    stopButton.onclick = function () {\n      restartButton.disabled = false;\n      stopTimer();\n    };\n    stopButton.id = \"stop_button_id\";\n    target.appendChild(stopButton);\n\n    // create restart button\n    let restartButton = document.createElement(\"button\");\n    restartButton.type = \"button\";\n    restartButton.disabled = true;\n    restartButton.className = \"displayFix restart-button fnjdsanfsksadf\";\n    restartButton.textContent = \"Restart\";\n    restartButton.id = \"restart_button_id\";\n    restartButton.onclick = function () {\n      restartButton.disabled = true;\n      restartTimer();\n    };\n    target.appendChild(restartButton);\n\n    // create delete button\n    let deleteButton = document.createElement(\"button\");\n    deleteButton.type = \"button\";\n    deleteButton.className = \"displayFix delete-button fnjdsanfsksadf\";\n    deleteButton.textContent = \"Delete\";\n    deleteButton.id = \"delete_button_id\";\n    deleteButton.onclick = function () {\n      deleteTimer();\n    };\n    target.appendChild(deleteButton);\n  }\n\n  function getBackgroundTimeEverySeconds() {\n    let target = document.getElementById(\"hidden_id\") ?? document.createElement(\"body\");\n\n    \n    let sendData = {\n      messageType: \"checkTimerStatus\",\n    };\n    chrome.runtime.sendMessage(sendData, function (response) {\n      if (response) {\n        if (response.TimerStatus) {\n          // DISPLAY TIMER...\n          is_Runnnig = response.ContentRunning;\n          target.textContent = `${response.NowTime}`;\n          Remaining_Time = response.NowTime;\n          if (is_Runnnig) {\n            if (Remaining_Time == 0) {\n              target.textContent = \"Time Over!!!\";\n            } else {\n              target.textContent = mmTime_To_Second(response.NowTime);\n              setTimeout(getBackgroundTimeEverySeconds, 1000);\n            }\n          } else {\n            target.textContent = mmTime_To_Second(response.Stopped_Time);\n          }\n        }\n      } else {\n        console.log(\"onTimerFlag => err...\");\n      }\n    });\n  }\n\n  function changeTimerStatus(flag = false, time:any) {\n    let sendData = {\n      messageType: \"chengeTimerStatus\",\n      onTimer: flag,\n      time: time,\n    };\n    chrome.runtime.sendMessage(sendData, function (response) {\n      if (response) {\n        console.log(response);\n      } else {\n        console.log(\"onTimerFlag => err...\");\n      }\n    });\n  }\n\n  function stopTimer() {\n    is_Runnnig = false;\n    let sendData = {\n      messageType: \"stopTimer\",\n      Stopped_Time: Remaining_Time,\n    };\n    chrome.runtime.sendMessage(sendData, function (response) {\n      if (response) {\n        console.log(response);\n      } else {\n        console.log(\"onTimerFlag => err...\");\n      }\n    });\n  }\n\n  function restartTimer() {\n    is_Runnnig = true;\n\n    changeTimerStatus(true, Remaining_Time);\n    getBackgroundTimeEverySeconds();\n  }\n\n  function deleteTimer() {\n    //backへの通信→それが成功したら、windowの削除\n    let sendData = {\n      messageType: \"deleteTimer\",\n    };\n    chrome.runtime.sendMessage(sendData, function (response) {\n      if (response) {\n        is_Runnnig = false;\n        Remaining_Time = 0;\n        deleteElement();\n      } else {\n        alert(\"Can Not stop timer\");\n      }\n    });\n  }\n\n  function deleteElement() {\n    $(\"#hidden_id\").remove();\n    $(\"#delete_button_id\").remove();\n    $(\"#stop_button_id\").remove();\n    $(\"#restart_button_id\").remove();\n  }\n\n  function mmTime_To_Second(mmTime:any) {\n    let second = mmTime / 1000;\n    let disp_min;\n    let disp_sec;\n    if (60 <= second) {\n      disp_min = Math.floor(second / 60);\n      disp_sec = second % 60;\n    } else {\n      disp_min = 0;\n      disp_sec = second;\n    }\n    return `${disp_min}min ${disp_sec}sec`;\n  }\n\n}"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClFA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;A","sourceRoot":""}